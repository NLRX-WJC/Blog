(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{288:function(t,s,a){t.exports=a.p+"assets/img/1.614221e8.png"},444:function(t,s,a){t.exports=a.p+"assets/img/3.60bf53e7.png"},445:function(t,s,a){t.exports=a.p+"assets/img/2.d8cf3a76.png"},446:function(t,s,a){t.exports=a.p+"assets/img/4.c64e4caa.png"},447:function(t,s,a){t.exports=a.p+"assets/img/5.cc5baf6a.png"},578:function(t,s,a){"use strict";a.r(s);var n=a(12),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"_1-å‰è¨€"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-å‰è¨€"}},[t._v("#")]),t._v(" 1. å‰è¨€")]),t._v(" "),s("p",[t._v("å¦‚æœä½ åœ¨ä¹‹å‰å¼€å‘ä¸­ä½¿ç”¨è¿‡ "),s("code",[t._v("React Hooks")]),t._v(" ï¼Œé‚£ä¹ˆä½ ä¸€å®šçŸ¥é“ä½¿ç”¨ "),s("code",[t._v("React Hooks")]),t._v(" æœ‰ä¸¤æ¡é“çš„ä½¿ç”¨è§„åˆ™ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("åªåœ¨ "),s("code",[t._v("React")]),t._v(" å‡½æ•°ä¸­è°ƒç”¨ "),s("code",[t._v("Hook")]),t._v("ï¼›")]),t._v(" "),s("li",[t._v("ä¸è¦åœ¨å¾ªç¯ã€æ¡ä»¶æˆ–åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨ "),s("code",[t._v("Hook")]),t._v("ï¼›")])]),t._v(" "),s("p",[t._v("å…¶ä¸­ç¬¬ä¸€æ¡è§„åˆ™ã€Œåªåœ¨ "),s("code",[t._v("React")]),t._v(" å‡½æ•°ä¸­è°ƒç”¨ "),s("code",[t._v("Hook")]),t._v(" ã€å¾ˆå¥½ç†è§£ï¼Œ "),s("code",[t._v("React Hooks")]),t._v(" æœ¬æ¥å°±æ˜¯ä¸ºå‡½æ•°ç»„ä»¶è€Œç”Ÿçš„ï¼Œåœ¨æ™®é€šå‡½æ•°ä¸­è°ƒç”¨æ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚ä½†æ˜¯ç¬¬äºŒæ¡ã€Œä¸è¦åœ¨å¾ªç¯ã€æ¡ä»¶æˆ–åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨ "),s("code",[t._v("Hook")]),t._v(" ã€çš„è§„åˆ™å°±å¾ˆå€¼å¾—ç©å‘³äº†ï¼Œä½ ä¸ç¦ä¼šç–‘é—®ï¼šä¸ºå•¥ä¸è®©æˆ‘åœ¨å¾ªç¯ã€æ¡ä»¶æˆ–åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨ "),s("code",[t._v("Hook")]),t._v(" ï¼Ÿä½ ä¸€ä¸ª "),s("code",[t._v("API")]),t._v(" æä¾›è€…å¯ä»¥é™åˆ¶æˆ‘æ€ä¹ˆç”¨ä½ çš„ "),s("code",[t._v("API")]),t._v(" ï¼Œä½ è¿™æ€ä¹ˆè¿˜é™åˆ¶æˆ‘åœ¨å“ªç”¨ï¼Ÿ")]),t._v(" "),s("p",[t._v("å…³äºè¿™æ¡è§„åˆ™ï¼Œ "),s("code",[t._v("React")]),t._v(" å®˜æ–¹æ˜¯è¿™ä¹ˆè¡¥å……è§£é‡Šçš„ï¼š"),s("strong",[t._v("ä½ å¿…é¡»ç¡®ä¿ "),s("code",[t._v("Hook")]),t._v(" åœ¨æ¯æ¬¡æ¸²æŸ“ä¸­éƒ½æŒ‰ç…§åŒæ ·çš„é¡ºåºè¢«è°ƒç”¨ã€‚è¿™æ ·æ‰èƒ½è®© "),s("code",[t._v("React")]),t._v(" åœ¨å¤šæ¬¡çš„ "),s("code",[t._v("hook")]),t._v(" è°ƒç”¨ä¹‹é—´ä¿æŒ "),s("code",[t._v("hook")]),t._v(" çŠ¶æ€çš„æ­£ç¡®ã€‚")])]),t._v(" "),s("p",[t._v("é‡ç‚¹åœ¨è¿™é‡Œï¼šç¡®ä¿æ¯ä¸€æ¬¡æ¸²æŸ“ä¸­éƒ½æŒ‰ç…§åŒæ ·çš„é¡ºåºè¢«è°ƒç”¨ã€‚"),s("strong",[t._v("é¡ºåºï¼é¡ºåºï¼ï¼é¡ºåºï¼ï¼ï¼")])]),t._v(" "),s("p",[t._v("æƒ³æƒ³çœ‹ï¼Œå¦‚æœä½ åœ¨æ¡ä»¶è¯­å¥ä¸­è°ƒç”¨äº†æŸä¸ª "),s("code",[t._v("Hook")]),t._v(" ï¼Œé‚£ä¹ˆè¿™ä¸ª "),s("code",[t._v("Hook")]),t._v(" å¿…ç„¶ä¸æ˜¯æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šè¢«è°ƒç”¨ï¼Œåªæœ‰æ¡ä»¶ä¸ºçœŸäº†æ‰ä¼šè¢«è°ƒç”¨ï¼Œè¿™å°±å¯¼è‡´åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶ï¼Œæœ‰æ—¶æœ‰5ä¸ª "),s("code",[t._v("Hook")]),t._v(" è¢«è°ƒç”¨ï¼Œæœ‰æ—¶å´åªæœ‰3ä¸ªè¢«è°ƒç”¨ï¼Œ "),s("code",[t._v("Hook")]),t._v(" çš„è°ƒç”¨é¡ºåºå˜å¾—ä¸ç¡®å®šäº†ã€‚é‚£ä¸ºä»€ä¹ˆ "),s("code",[t._v("Hook")]),t._v(" çš„è°ƒç”¨é¡ºåºè¿™ä¹ˆé‡è¦å‘¢ï¼Ÿä¸ºä»€ä¹ˆä¸€å®šè¦ä¿è¯æ‰€æœ‰çš„ "),s("code",[t._v("Hook")]),t._v(" åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½è¦ä»¥åŒæ ·çš„é¡ºåºè¢«è°ƒç”¨å‘¢ï¼Ÿè¿™å°±æ¶‰åŠåˆ° "),s("code",[t._v("Hook")]),t._v(" çš„å®ç°æœºåˆ¶äº†ï¼Œæ¥ä¸‹æ¥ï¼Œæœ¬æ–‡å°±ä»æºç è§’åº¦å‡ºå‘ï¼Œæ¥æ¢ç©¶ä¸€ä¸‹ "),s("code",[t._v("React")]),t._v(" ä¸ºä»€ä¹ˆè¦é™åˆ¶ "),s("code",[t._v("Hook")]),t._v(" çš„è°ƒç”¨é¡ºåºã€‚")]),t._v(" "),s("h2",{attrs:{id:"_2-ä¸æŒ‰è§„å®šæ¥ä¼šæ€æ ·"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-ä¸æŒ‰è§„å®šæ¥ä¼šæ€æ ·"}},[t._v("#")]),t._v(" 2. ä¸æŒ‰è§„å®šæ¥ä¼šæ€æ ·")]),t._v(" "),s("p",[t._v("åœ¨ç ”ç©¶æºç ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹å‡å¦‚ä¸ä¿è¯ "),s("code",[t._v("Hooks")]),t._v(" çš„æ‰§è¡Œé¡ºåºï¼Œä¼šå‡ºç°ä»€ä¹ˆæ ·çš„ç°è±¡ï¼Ÿ")]),t._v(" "),s("p",[t._v("æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ª "),s("a",{attrs:{href:"https://codesandbox.io/s/relaxed-cookies-p0edv?file=/src/PersonalInfoComponent.jsx",target:"_blank",rel:"noopener noreferrer"}},[t._v("Demo"),s("OutboundLink")],1),t._v("ï¼Œå¦‚ä¸‹ï¼š")]),t._v(" "),s("div",{staticClass:"language-jsx line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-jsx"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useState "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("PersonalInfoComponent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("setName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"éš¾å‡‰çƒ­è¡€"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("age"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("career"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"å‰ç«¯å¼€å‘"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("className")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("personalInfo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n      ")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("å§“åï¼š")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n      ")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("å¹´é¾„ï¼š")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("age"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n      ")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("èŒä¸šï¼š")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("career"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n      ")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("onClick")]),s("span",{pre:!0,attrs:{class:"token script language-javascript"}},[s("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"çƒ­è¡€éš¾å‡‰"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n        ä¿®æ”¹å§“å\n      ")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n    ")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" PersonalInfoComponent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br")])]),s("p",[t._v("åœ¨è¿™ä¸ª "),s("code",[t._v("Demo")]),t._v(" ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ "),s("code",[t._v("useState")]),t._v(" å®šä¹‰äº†ä¸‰ä¸ªçŠ¶æ€ï¼Œåˆ†åˆ«æ˜¯ï¼šå§“åã€å¹´é¾„å’ŒèŒä¸šã€‚å¹¶åœ¨è§†å›¾ä¸­å°†è¿™ä¸‰ä¸ªçŠ¶æ€å±•ç¤ºå‡ºæ¥ï¼Œç‚¹å‡»ã€Œä¿®æ”¹å§“åã€æŒ‰é’®å¯ä¿®æ”¹å§“åï¼Œå¦‚ä¸‹ï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:a(288),alt:""}})]),t._v(" "),s("p",[t._v("okï¼Œæ²¡æœ‰é—®é¢˜ï¼Œç‚¹å‡»ã€Œä¿®æ”¹å§“åã€æŒ‰é’®ä¹Ÿèƒ½æ­£å¸¸ä¿®æ”¹å§“åï¼Œä»¥ä¸Šéƒ½æ˜¯åœ¨æ­£å¸¸ä½¿ç”¨ "),s("code",[t._v("Hooks")]),t._v(" ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åšä¸€ç‚¹è°ƒæ•´ï¼Œä½¿å¾— "),s("code",[t._v("Hooks")]),t._v(" çš„è°ƒç”¨é¡ºåºä¸å†ä¿æŒä¸€è‡´ï¼Œä»£ç å¦‚ä¸‹ï¼š")]),t._v(" "),s("div",{staticClass:"language-jsx line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-jsx"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useState "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" isMounted "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("PersonalInfoComponent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" age"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" career"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"isMounted"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" isMounted"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("isMounted"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// eslint-disable-next-line")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"éš¾å‡‰çƒ­è¡€"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// eslint-disable-next-line")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("age"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// if å†…éƒ¨çš„é€»è¾‘æ‰§è¡Œä¸€æ¬¡åï¼Œå°±å°† isMounted ç½®ä¸º trueï¼ˆè¯´æ˜å·²æŒ‚è½½ï¼Œåç»­éƒ½ä¸å†æ˜¯é¦–æ¬¡æ¸²æŸ“äº†ï¼‰")]),t._v("\n    isMounted "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("career"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"å‰ç«¯å¼€å‘"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"career"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" career"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("className")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("personalInfo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n      ")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("å§“åï¼š")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n      ")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("å¹´é¾„ï¼š")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("age"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n      ")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("èŒä¸šï¼š")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("career"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n      ")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("onClick")]),s("span",{pre:!0,attrs:{class:"token script language-javascript"}},[s("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"çƒ­è¡€éš¾å‡‰"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n        ä¿®æ”¹å§“å\n      ")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n    ")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" PersonalInfoComponent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br")])]),s("p",[t._v("ä»ä¸Šé¢ä»£ç ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬æŠŠä¸€éƒ¨åˆ†çš„ "),s("code",[t._v("useState")]),t._v(" æ“ä½œæ”¾è¿› "),s("code",[t._v("if")]),t._v(" æ¡ä»¶è¯­å¥é‡Œï¼Œåªæœ‰åœ¨ç»„ä»¶é¦–æ¬¡æ¸²æŸ“çš„æ—¶å€™ï¼Œåå­—å’Œå¹´é¾„çš„ "),s("code",[t._v("useState")]),t._v(" æ‰ä¼šè¢«è°ƒç”¨ï¼Œåœ¨ä¹‹åçš„æ›´æ–°æ¸²æŸ“ä¸­å°±åªæœ‰èŒä¸šçš„ "),s("code",[t._v("useState")]),t._v(" è¢«è°ƒç”¨ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†ç‚¹å‡»ã€Œä¿®æ”¹å§“åã€æŒ‰é’®ï¼Œçœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆæ ·çš„ç°è±¡ï¼š")]),t._v(" "),s("p",[t._v("å½“åˆ·æ–°é¡µé¢ï¼Œæ¸²æŸ“ç»“æœè·Ÿä¹‹å‰æ— å¼‚ï¼Œä¸€åˆ‡éƒ½æ­£å¸¸æ¸²æŸ“ï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:a(288),alt:""}})]),t._v(" "),s("p",[t._v("å¹¶ä¸” "),s("code",[t._v("F12")]),t._v(" æ‰“å¼€æ§åˆ¶å°ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬æ‰“å°çš„ "),s("code",[t._v("career")]),t._v(" ä¹Ÿæ˜¯æ­£ç¡®çš„ï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:a(444),alt:"3"}})]),t._v(" "),s("p",[t._v("æ¥ç€ï¼Œæˆ‘ä»¬ç‚¹å‡»ã€Œä¿®æ”¹å§“åã€æŒ‰é’®ï¼Œå‘ç°é¡µé¢ç›´æ¥æŠ¥é”™äº†ï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:a(445),alt:"2"}})]),t._v(" "),s("p",[t._v("ä»æŠ¥é”™ä¿¡æ¯ä¸­å¯ä»¥çœ‹å‡º "),s("code",[t._v("React")]),t._v(" åœ¨æç¤ºæˆ‘ä»¬"),s("strong",[t._v("Rendered fewer hooks than expectedï¼ˆç»„ä»¶æ¸²æŸ“çš„ Hooks æ¯”æœŸæœ›ä¸­æ›´å°‘ï¼‰")]),t._v("ã€‚æ²¡é”™ï¼Œé¦–æ¬¡æ¸²æŸ“çš„æ—¶å€™æœ‰ä¸‰ä¸ª "),s("code",[t._v("Hook")]),t._v(" è¢«è°ƒç”¨äº†ï¼Œä½†æ˜¯å½“ç‚¹å‡»æŒ‰é’®ä¹‹åè¿›å…¥æ›´æ–°æ¸²æŸ“çš„æ—¶å€™å´åªæœ‰ä¸€ä¸ª "),s("code",[t._v("Hook")]),t._v(" è¢«è°ƒç”¨ï¼Œä¸Šæ–‡ä¹Ÿè¯´äº†ï¼Œ "),s("code",[t._v("React")]),t._v(" è¦æ±‚åœ¨æ¯æ¬¡æ¸²æŸ“ä¸­æ‰€æœ‰çš„ "),s("code",[t._v("Hook")]),t._v(" éƒ½å¿…é¡»ä»¥ç›¸åŒçš„é¡ºåºè¢«è°ƒç”¨ï¼Œçœ‹æ¥ï¼Œ "),s("code",[t._v("React")]),t._v(" æç¤ºçš„æ²¡æ¯›ç—…ã€‚")]),t._v(" "),s("p",[t._v("æ¥ç€ï¼Œæˆ‘ä»¬æ‰“å¼€æ§åˆ¶å°ï¼Œçœ‹çœ‹æ‰“å°çš„ "),s("code",[t._v("career")]),t._v(" æœ‰æ²¡æœ‰ä»€ä¹ˆå˜åŒ–ï¼Œå¦‚ä¸‹ï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:a(446),alt:"4"}})]),t._v(" "),s("p",[t._v("å§æ§½ï¼æˆ‘æ˜æ˜ä¿®æ”¹çš„æ˜¯å§“åä¹ˆï¼Œä¸æ˜¯åº”è¯¥æ”¹ "),s("code",[t._v("name")]),t._v(" å—ï¼Ÿæ€ä¹ˆæ”¹åˆ° "),s("code",[t._v("career")]),t._v(" ä¸Šå»äº†ï¼Ÿï¼Ÿï¼Ÿ  ğŸ˜±ğŸ˜±ğŸ˜±")]),t._v(" "),s("p",[t._v("çœ‹æ¥æˆ‘ä»¬å¿…é¡»å¾—æ‰’ä¸€æ‰’ "),s("code",[t._v("Hooks")]),t._v(" çš„å®ç°æœºåˆ¶äº†ã€‚")]),t._v(" "),s("blockquote",[s("p",[t._v("æ³¨æ„ï¼šå¦‚æœä½ æƒ³å¤ç°è¿™ä¸ª Demoï¼Œè¯·å°† React ç‰ˆæœ¬è°ƒæ•´åˆ° 16.8.x")])]),t._v(" "),s("h2",{attrs:{id:"_3-é€è¿‡ç°è±¡çœ‹æœ¬è´¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-é€è¿‡ç°è±¡çœ‹æœ¬è´¨"}},[t._v("#")]),t._v(" 3. é€è¿‡ç°è±¡çœ‹æœ¬è´¨")]),t._v(" "),s("p",[t._v("ä»ä¸Šä¸€ç« èŠ‚ä¸­çš„ "),s("code",[t._v("Demo")]),t._v(" ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š**å¦‚æœä¸ä¿è¯æ¯æ¬¡æ¸²æŸ“ä¸­æ‰€æœ‰ "),s("code",[t._v("Hook")]),t._v(" çš„è°ƒç”¨é¡ºåºçš„è¯ï¼Œä¼šé€ æˆ "),s("code",[t._v("Hook")]),t._v(" çŠ¶æ€çš„ç´Šä¹±ã€‚**é‚£ä¹ˆä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ç§æƒ…å†µå‘¢ï¼Ÿæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±ä»æºç çš„è§’åº¦æ¥ä¸€æ¢ç©¶ç«Ÿã€‚")]),t._v(" "),s("p",[t._v("æˆ‘ä»¬ä»¥æœ€ç®€å•çš„ "),s("code",[t._v("useState")]),t._v(" ä¸ºä¾‹ï¼Œåœ¨ "),s("code",[t._v("React")]),t._v(" æºç ä¸­ï¼Œ "),s("code",[t._v("useState")]),t._v(" æ˜¯è¿™æ ·"),s("a",{attrs:{href:"https://github.com/facebook/react/blob/17.0.2/packages/react/src/ReactHooks.js#L80-L85",target:"_blank",rel:"noopener noreferrer"}},[t._v("å®šä¹‰"),s("OutboundLink")],1),t._v("çš„ï¼š")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("initialState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" dispatcher "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolveDispatcher")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" dispatcher"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("initialState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("p",[t._v("å¯ä»¥çœ‹åˆ°ï¼Œ "),s("code",[t._v("useState")]),t._v(" çš„æºç å®šä¹‰éå¸¸ç®€å•ï¼Œå°±æ˜¯å…ˆè·å–ä¸€ä¸‹å½“å‰çš„ "),s("code",[t._v("dispatcher")]),t._v(" ï¼Œç„¶åå†è°ƒç”¨ "),s("code",[t._v("dispatcher.useState")]),t._v(" æ–¹æ³•å¹¶ä¸”ä¼ å…¥ "),s("code",[t._v("useState")]),t._v(" çš„åˆå§‹å€¼ã€‚é‚£ä¹ˆå½“å‰çš„ "),s("code",[t._v("dispatcher")]),t._v(" åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿé€šè¿‡ç ”ç©¶æºç å‘ç°ï¼Œå½“å‡½æ•°ç»„ä»¶è¿›å…¥ "),s("code",[t._v("render é˜¶æ®µ")]),t._v(" çš„æ—¶å€™ï¼Œå¦‚æœå‘ç°ç»„ä»¶å†…å­˜åœ¨ "),s("code",[t._v("Hooks")]),t._v(" ï¼Œé‚£ä¹ˆä¼šè°ƒç”¨ "),s("a",{attrs:{href:"https://github.com/facebook/react/blob/17.0.2/packages/react-reconciler/src/ReactFiberHooks.new.js#L399-L402",target:"_blank",rel:"noopener noreferrer"}},[t._v("renderWithHooks"),s("OutboundLink")],1),t._v(" æ–¹æ³•ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•ä¸­ä¼šæ ¹æ®ä¸åŒæ¸²æŸ“æƒ…å†µå¯¹å½“å‰çš„ "),s("code",[t._v("dispatcher")]),t._v(" è¿›è¡Œèµ‹å€¼ï¼Œå¦‚ä¸‹ï¼š")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("ReactCurrentDispatcher"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n  current "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" current"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("memoizedState "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("HooksDispatcherOnMount")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n  HooksDispatcherOnUpdate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("p",[t._v("ä»ä»£ç ä¸­å¯ä»¥çœ‹åˆ°ï¼Œé¦–å…ˆä½¿ç”¨ "),s("code",[t._v("current === null || current.memoizedState === null")]),t._v(" åŒºåˆ†å½“å‰ç»„ä»¶æ˜¯åœ¨ "),s("code",[t._v("mount")]),t._v(" è¿˜æ˜¯ "),s("code",[t._v("update")]),t._v(" ï¼Œç„¶åæŠŠä¸åŒæƒ…å†µçš„ "),s("code",[t._v("dispatcher")]),t._v(" èµ‹å€¼ç»™å…¨å±€å˜é‡ "),s("code",[t._v("ReactCurrentDispatcher")]),t._v(" çš„ "),s("code",[t._v("current")]),t._v(" å±æ€§ï¼Œèµ‹å€¼å®Œä»¥åï¼Œåœ¨ "),s("code",[t._v("useState")]),t._v(" å®šä¹‰é‡Œé€šè¿‡è°ƒç”¨ "),s("code",[t._v("resolveDispatcher")]),t._v(" æ–¹æ³•å°±èƒ½è·å–åˆ°å½“å‰çš„ "),s("code",[t._v("dispatcher")]),t._v(" äº†ã€‚")]),t._v(" "),s("p",[t._v("ä»è¿™é‡Œæˆ‘ä»¬å°±çŸ¥é“äº†ï¼Œ "),s("code",[t._v("Hooks")]),t._v(" åœ¨é¦–æ¬¡æ¸²æŸ“å’Œæ›´æ–°æ¸²æŸ“æ—¶ä½¿ç”¨çš„æ˜¯ä¸åŒçš„ "),s("code",[t._v("dispatcher")]),t._v(" ï¼Œä»è€Œæ‰§è¡Œçš„æ˜¯ä¸ç”¨çš„é€»è¾‘ã€‚ä¸‹é¢æˆ‘ä»¬å°±æ¥çœ‹ä¸‹é¦–æ¬¡æ¸²æŸ“å’Œæ›´æ–°æ¸²æŸ“è¿™ä¸¤ç§ä¸åŒçš„ "),s("code",[t._v("dispatcher")]),t._v(" é‡Œéƒ½å¹²äº†äº›ä»€ä¹ˆã€‚")]),t._v(" "),s("h3",{attrs:{id:"_3-1-é¦–æ¬¡æ¸²æŸ“"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-é¦–æ¬¡æ¸²æŸ“"}},[t._v("#")]),t._v(" 3.1 é¦–æ¬¡æ¸²æŸ“")]),t._v(" "),s("p",[t._v("ä»ä¸Šæ–‡åˆ†æå¾—çŸ¥ï¼Œé¦–æ¬¡æ¸²æŸ“ä½¿ç”¨çš„ "),s("code",[t._v("dispatcher")]),t._v(" æ˜¯ "),s("a",{attrs:{href:"https://github.com/facebook/react/blob/17.0.2/packages/react-reconciler/src/ReactFiberHooks.old.js#L1776-L1795",target:"_blank",rel:"noopener noreferrer"}},[t._v("HooksDispatcherOnMount"),s("OutboundLink")],1),t._v("ï¼Œå…¶ä»£ç å¦‚ä¸‹:")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("HooksDispatcherOnMount")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Dispatcher "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  readContext"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("useCallback")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" mountCallback"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("useContext")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" readContext"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("useEffect")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" mountEffect"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("useImperativeHandle")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" mountImperativeHandle"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("useLayoutEffect")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" mountLayoutEffect"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("useMemo")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" mountMemo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("useReducer")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" mountReducer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("useRef")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" mountRef"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("useState")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" mountState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("useDebugValue")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" mountDebugValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("useDeferredValue")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" mountDeferredValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("useTransition")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" mountTransition"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("useMutableSource")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" mountMutableSource"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("useOpaqueIdentifier")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" mountOpaqueIdentifier"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("unstable_isNewReconciler")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" enableNewReconciler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br")])]),s("p",[t._v("è¿˜æ˜¯ä»¥ "),s("code",[t._v("useState")]),t._v(" ä¸ºä¾‹ï¼Œåœ¨é¦–æ¬¡æ¸²æŸ“é˜¶æ®µè°ƒç”¨ "),s("code",[t._v("useState")]),t._v(" å®é™…ä¸Šè°ƒç”¨çš„æ˜¯ "),s("code",[t._v("HooksDispatcherOnMount.useState")]),t._v(" å³ "),s("code",[t._v("mountState")]),t._v(" æ–¹æ³•ï¼Œæˆ‘ä»¬ç»§ç»­è¿½ "),s("code",[t._v("mountState")]),t._v(" çš„å†…éƒ¨å®ç°ï¼Œå®ƒæ˜¯è¿™æ ·"),s("a",{attrs:{href:"https://github.com/facebook/react/blob/17.0.2/packages/react-reconciler/src/ReactFiberHooks.new.js#L1126-L1149",target:"_blank",rel:"noopener noreferrer"}},[t._v("å®šä¹‰"),s("OutboundLink")],1),t._v("çš„ï¼š")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mountState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("initialState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å°†æ–°çš„ hook å¯¹è±¡è¿½åŠ è¿›é“¾è¡¨å°¾éƒ¨")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" hook "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mountWorkInProgressHook")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// initialState å¯ä»¥æ˜¯ä¸€ä¸ªå›è°ƒï¼Œè‹¥æ˜¯å›è°ƒï¼Œåˆ™å–å›è°ƒæ‰§è¡Œåçš„å€¼")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" initialState "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'function'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    initialState "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("initialState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å°† initialState ä½œä¸ºä¸€ä¸ªâ€œè®°å¿†å€¼â€å­˜ä¸‹æ¥")]),t._v("\n  hook"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("memoizedState "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" hook"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("baseState "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" initialState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ›å»ºå½“å‰ hook å¯¹è±¡çš„æ›´æ–°é˜Ÿåˆ—ï¼Œè¿™ä¸€æ­¥ä¸»è¦æ˜¯ä¸ºäº†èƒ½å¤Ÿä¾åºä¿ç•™ dispatch")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" queue "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("hook"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("queue "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("pending")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("dispatch")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("lastRenderedReducer")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" basicStateReducer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("lastRenderedState")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("initialState"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" any"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" dispatch "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("queue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dispatch "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispatchAction")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bind")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    currentlyRenderingFiber"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    queue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" any"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿”å›ç›®æ ‡æ•°ç»„ï¼Œdispatch å…¶å®å°±æ˜¯å¸¸å¸¸è§åˆ°çš„ setXXX è¿™ä¸ªå‡½æ•°")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("hook"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("memoizedState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" dispatch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br")])]),s("p",[t._v("ä»è¿™æ®µæºç ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œ"),s("strong",[t._v("mounState çš„ä¸»è¦å·¥ä½œæ˜¯åˆå§‹åŒ– Hooks")]),t._v("ã€‚åœ¨æ•´æ®µæºç ä¸­ï¼Œæœ€éœ€è¦å…³æ³¨çš„æ˜¯ "),s("code",[t._v("mountWorkInProgressHook")]),t._v(" æ–¹æ³•ï¼Œå®ƒä¸ºæˆ‘ä»¬é“å‡ºäº† "),s("code",[t._v("Hooks")]),t._v(" èƒŒåçš„æ•°æ®ç»“æ„ç»„ç»‡å½¢å¼ã€‚ä»¥ä¸‹æ˜¯ "),s("code",[t._v("mountWorkInProgressHook")]),t._v(" æ–¹æ³•çš„"),s("a",{attrs:{href:"https://github.com/facebook/react/blob/17.0.2/packages/react-reconciler/src/ReactFiberHooks.new.js#L544-L563",target:"_blank",rel:"noopener noreferrer"}},[t._v("å®šä¹‰"),s("OutboundLink")],1),t._v("ï¼š")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mountWorkInProgressHook")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ³¨æ„ï¼Œå•ä¸ª hook æ˜¯ä»¥å¯¹è±¡çš„å½¢å¼å­˜åœ¨çš„")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" hook "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("memoizedState")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("baseState")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("baseQueue")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("queue")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("next")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("workInProgressHook "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è‹¥æ­£åœ¨å¤„ç†çš„ hook é“¾è¡¨ä¸ºç©ºï¼Œåˆ™å°†ä¸Šé¢å®šä¹‰å¥½çš„ hook ä½œä¸ºé“¾è¡¨çš„å¤´èŠ‚ç‚¹")]),t._v("\n    currentlyRenderingFiber"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("memoizedState "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" workInProgressHook "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" hook"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è‹¥é“¾è¡¨ä¸ä¸ºç©ºï¼Œåˆ™å°† hook è¿½åŠ åˆ°é“¾è¡¨å°¾éƒ¨")]),t._v("\n    workInProgressHook "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" workInProgressHook"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("next "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" hook"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" workInProgressHook"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br")])]),s("p",[t._v("åˆ°è¿™é‡Œå¯ä»¥çœ‹å‡ºï¼Œ"),s("strong",[t._v("hook ç›¸å…³çš„æ‰€æœ‰ä¿¡æ¯æ”¶æ•›åœ¨ä¸€ä¸ª hook å¯¹è±¡é‡Œï¼Œè€Œ hook å¯¹è±¡ä¹‹é—´ä»¥å•å‘é“¾è¡¨çš„å½¢å¼ç›¸äº’ä¸²è”")]),t._v("ã€‚")]),t._v(" "),s("p",[t._v("åˆ°è¿™é‡Œï¼ŒçœŸç›¸å·²ç»å¼€å§‹é€æ¸æµ®å‡ºæ°´é¢äº†ï¼šç»„ä»¶ä¸­çš„æ‰€æœ‰ "),s("code",[t._v("Hooks")]),t._v(" ä¹‹é—´éƒ½æ˜¯ä»¥å•å‘é“¾è¡¨çš„å½¢å¼ä¸²è”ï¼Œç¯ç¯ç›¸æ‰£çš„ã€‚")]),t._v(" "),s("p",[t._v("æˆ‘ä»¬å¯ä»¥å¤§èƒ†çŒœæƒ³ä¸€ä¸‹ï¼šå‡å¦‚é“¾æ¥ä¸­é—´æœ‰ä¸€ç¯ä¸¢å¤±äº†ï¼Œé‚£ä¹ˆè¿™æ¡é“¾è¡¨çš„é¡ºåºå°±ä¼šå‘ç”Ÿå˜åŒ–ï¼Œä»è€Œæœ‰å¯èƒ½å¯¼è‡´è¿˜å­˜åœ¨åœ¨é“¾è¡¨ä¹‹ä¸­çš„ "),s("code",[t._v("Hook")]),t._v(" çŠ¶æ€ä¸ä¹‹å‰æ— æ³•å¯¹åº”çš„æƒ…å†µï¼Œä»è€Œå¯¼è‡´ "),s("code",[t._v("hook")]),t._v(" çŠ¶æ€ç´Šä¹±ã€‚")]),t._v(" "),s("p",[t._v("é‚£ä¹ˆçœŸç›¸åˆ°åº•æ˜¯ä¸æ˜¯å¦‚æˆ‘ä»¬çŒœæƒ³çš„è¿™èˆ¬å‘¢ï¼Ÿåˆ«æ€¥ï¼Œæˆ‘ä»¬ç»§ç»­å¾€ä¸‹çœ‹ï¼Œçœ‹å®Œäº†é¦–æ¬¡æ¸²æŸ“çš„æƒ…å†µï¼Œæˆ‘ä»¬ç»§ç»­çœ‹æ›´æ–°æ¸²æŸ“æ—¶éƒ½å¹²äº†äº›ä»€ä¹ˆã€‚")]),t._v(" "),s("h3",{attrs:{id:"_3-2-æ›´æ–°æ¸²æŸ“"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-æ›´æ–°æ¸²æŸ“"}},[t._v("#")]),t._v(" 3.2 æ›´æ–°æ¸²æŸ“")]),t._v(" "),s("p",[t._v("æ›´æ–°æ¸²æŸ“ä½¿ç”¨çš„ "),s("code",[t._v("dispatcher")]),t._v(" æ˜¯ "),s("a",{attrs:{href:"https://github1s.com/facebook/react/blob/17.0.2/packages/react-reconciler/src/ReactFiberHooks.old.js#L1797-L1816",target:"_blank",rel:"noopener noreferrer"}},[t._v("HooksDispatcherOnUpdate"),s("OutboundLink")],1),t._v("ï¼Œä»£ç å¦‚ä¸‹ï¼š")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("HooksDispatcherOnUpdate")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Dispatcher "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  readContext"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("useCallback")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" updateCallback"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("useContext")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" readContext"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("useEffect")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" updateEffect"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("useImperativeHandle")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" updateImperativeHandle"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("useLayoutEffect")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" updateLayoutEffect"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("useMemo")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" updateMemo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("useReducer")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" updateReducer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("useRef")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" updateRef"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("useState")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" updateState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("useDebugValue")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" updateDebugValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("useDeferredValue")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" updateDeferredValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("useTransition")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" updateTransition"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("useMutableSource")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" updateMutableSource"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("useOpaqueIdentifier")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" updateOpaqueIdentifier"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("unstable_isNewReconciler")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" enableNewReconciler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br")])]),s("p",[t._v("åœ¨æ›´æ–°æ¸²æŸ“é˜¶æ®µè°ƒç”¨ "),s("code",[t._v("useState")]),t._v(" å®é™…ä¸Šè°ƒç”¨çš„æ˜¯ "),s("code",[t._v("HooksDispatcherOnUpdate.useState")]),t._v(" å³ "),s("code",[t._v("updateState")]),t._v(" æ–¹æ³•ï¼Œå®ƒæ˜¯è¿™æ ·"),s("a",{attrs:{href:"https://github.com/facebook/react/blob/17.0.2/packages/react-reconciler/src/ReactFiberHooks.old.js#L1138-L1142",target:"_blank",rel:"noopener noreferrer"}},[t._v("å®šä¹‰"),s("OutboundLink")],1),t._v("çš„ï¼š")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("initialState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateReducer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("basicStateReducer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" initialState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[t._v("å¯ä»¥çœ‹åˆ°ï¼Œ "),s("code",[t._v("updateState")]),t._v(" æ–¹æ³•æœ€ç»ˆä¼šè½åˆ° "),s("code",[t._v("updateReducer")]),t._v(" è¿™ä¸ªæ–¹æ³•ä¸­ã€‚")]),t._v(" "),s("blockquote",[s("p",[t._v("ç”±äºåœ¨æºç ä¸­ï¼ŒuseState å’Œ useReducer å¤ç”¨äº†ä¸€å¥—æ›´æ–°æœºåˆ¶ï¼Œæ‰€ä»¥ updateReducer æ–¹æ³•çš„ä»£ç é‡å¾ˆå¤§ï¼Œæ­¤å¤„ä¸å†é€è¡Œè§£æï¼Œæœ‰å…´è¶£çš„è¯å¯ä»¥çœ‹æºç å®šä¹‰ï¼Œ"),s("a",{attrs:{href:"https://github.com/facebook/react/blob/17.0.2/packages/react-reconciler/src/ReactFiberHooks.old.js#L651-L783",target:"_blank",rel:"noopener noreferrer"}},[t._v("åœ¨è¿™é‡Œ"),s("OutboundLink")],1),t._v("ã€‚")])]),t._v(" "),s("p",[t._v("å…¶å® "),s("code",[t._v("updateState")]),t._v(" åšçš„çš„äº‹æƒ…å¾ˆå®¹æ˜“ç†è§£ï¼Œé‚£å°±æ˜¯ï¼š"),s("strong",[t._v("æŒ‰é¡ºåºå»éå†ä¹‹å‰æ„å»ºå¥½çš„é“¾è¡¨ï¼Œå–å‡ºå¯¹åº”çš„æ•°æ®ä¿¡æ¯è¿›è¡Œæ¸²æŸ“")]),t._v("ã€‚")]),t._v(" "),s("h3",{attrs:{id:"_3-3-å°ç»“"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-å°ç»“"}},[t._v("#")]),t._v(" 3.3 å°ç»“")]),t._v(" "),s("p",[t._v("ç°åœ¨ï¼Œæˆ‘ä»¬æŠŠ "),s("code",[t._v("mountState")]),t._v(" å’Œ "),s("code",[t._v("updateStat")]),t._v(" e åšçš„äº‹æƒ…æ”¾åœ¨ä¸€èµ·æ¥çœ‹ï¼Œä¸éš¾å¾—å‡ºï¼š")]),t._v(" "),s("p",[s("code",[t._v("mountState")]),t._v(" ï¼ˆé¦–æ¬¡æ¸²æŸ“ï¼‰æ„å»ºé“¾è¡¨å¹¶æ¸²æŸ“ï¼›")]),t._v(" "),s("p",[s("code",[t._v("updateState")]),t._v(" ï¼ˆæ›´æ–°æ¸²æŸ“ï¼‰ä¾æ¬¡éå†é“¾è¡¨å¹¶æ¸²æŸ“ã€‚")]),t._v(" "),s("p",[t._v("çœ‹æ¥ï¼ŒçœŸç›¸åªæœ‰ä¸€ä¸ªï¼š"),s("strong",[t._v("hooks çš„æ¸²æŸ“æ˜¯é€šè¿‡ã€Œä¾æ¬¡éå†ã€æ¥å®šä½æ¯ä¸ª hooks å†…å®¹çš„ã€‚å¦‚æœå‰åä¸¤æ¬¡è¯»åˆ°çš„é“¾è¡¨åœ¨é¡ºåºä¸Šå‡ºç°å·®å¼‚ï¼Œé‚£ä¹ˆæ¸²æŸ“çš„ç»“æœè‡ªç„¶æ˜¯ä¸å¯æ§çš„")]),t._v("ã€‚")]),t._v(" "),s("h2",{attrs:{id:"_4-å›çœ‹demo"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-å›çœ‹demo"}},[t._v("#")]),t._v(" 4. å›çœ‹Demo")]),t._v(" "),s("p",[t._v("äº†è§£äº† "),s("code",[t._v("Hooks")]),t._v(" çš„å·¥ä½œæœºåˆ¶åï¼Œæˆ‘ä»¬å›çœ‹ä¸Šæ–‡å†™çš„ "),s("code",[t._v("Demo")]),t._v(" ï¼Œä»å·¥ä½œæœºåˆ¶è§’åº¦åˆ†æä¸€æ³¢ã€‚")]),t._v(" "),s("p",[t._v("åœ¨ "),s("code",[t._v("Demo")]),t._v(" ä¸­æˆ‘ä»¬å®šä¹‰äº†ä¸‰ä¸ªçŠ¶æ€ï¼Œåˆ†åˆ«æ˜¯ï¼š")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"éš¾å‡‰çƒ­è¡€"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("age"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("career"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"å‰ç«¯å¼€å‘"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[t._v("åœ¨é¦–æ¬¡æ¸²æŸ“ä¸­ï¼Œæ„å»ºå¾—åˆ°çš„ "),s("code",[t._v("Hooks")]),t._v(" é“¾è¡¨æ˜¯è¿™æ ·çš„ï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:a(447),alt:"5"}})]),t._v(" "),s("p",[t._v("å½“ç‚¹å‡»ã€Œä¿®æ”¹å§“åã€æŒ‰é’®è¿›è¡Œæ›´æ–°æ¸²æŸ“æ—¶ï¼Œæ­¤æ—¶ "),s("code",[t._v("name")]),t._v(" å’Œ "),s("code",[t._v("age")]),t._v(" çš„ "),s("code",[t._v("useState")]),t._v(" ä¸ä¼šè¢«è°ƒç”¨ï¼Œåªä¼šè°ƒç”¨ "),s("code",[t._v("career")]),t._v(" çš„ "),s("code",[t._v("useState")]),t._v(" ã€‚æ­¤æ—¶å¯¹äº "),s("code",[t._v("React")]),t._v(" æ¥è¯´ï¼Œæˆ‘ä¸ä¼šçœ‹ä½ å‘½åçš„å˜é‡åæ˜¯ "),s("code",[t._v("career")]),t._v(" è¿˜æ˜¯åˆ«çš„ä»€ä¹ˆï¼Œæˆ‘åªè®¤ä½ è¿™æ˜¯ç¬¬ä¸€æ¬¡ "),s("code",[t._v("useState")]),t._v(" è°ƒç”¨ï¼Œäºæ˜¯å°±ä¼šè®¤ä¸ºï¼š"),s("strong",[t._v("å–”ï¼ŒåŸæ¥ä½ æƒ³è¦çš„æ˜¯ç¬¬ä¸€ä¸ªä½ç½®çš„ hook å•Š")]),t._v("ã€‚")]),t._v(" "),s("p",[t._v("è€Œåœ¨æ„å»ºé“¾è¡¨çš„æ—¶å€™ï¼Œé“¾è¡¨ç¬¬ä¸€ä¸ªä½ç½®æ˜¯ "),s("code",[t._v("name")]),t._v(" ï¼Œå¹¶ä¸”å¯¹åº”çš„å€¼è¢«æ”¹ä¸ºäº†ï¼šçƒ­è¡€éš¾å‡‰ã€‚")]),t._v(" "),s("p",[t._v("æ‰€ä»¥å°±å‡ºç°äº† "),s("code",[t._v("Demo")]),t._v(" ä¸­çš„é‚£ä¸€å¹•ï¼šä»å¼€å‘è€…è§’åº¦æ¥çœ‹ï¼Œæˆ‘ä¿®æ”¹çš„æ˜¯ "),s("code",[t._v("name")]),t._v(" çŠ¶æ€ï¼Œä½ å´ç»™æˆ‘æ”¹çš„æ˜¯ "),s("code",[t._v("career")]),t._v(" çŠ¶æ€ï¼›è€Œä» "),s("code",[t._v("React")]),t._v(" è§’åº¦æ¥çœ‹ï¼Œä½ è¦çš„ä»…ä»…æ˜¯ç¬¬ä¸€ä¸ª "),s("code",[t._v("Hook")]),t._v(" è€Œå·²ã€‚")]),t._v(" "),s("h2",{attrs:{id:"_5-æ€»ç»“"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-æ€»ç»“"}},[t._v("#")]),t._v(" 5. æ€»ç»“")]),t._v(" "),s("p",[t._v("å‡½æ•°ç»„ä»¶ä¸­çš„ "),s("code",[t._v("Hooks")]),t._v(" æ˜¯ä»¥å•å‘é“¾è¡¨å½¢å¼ç›¸äº’ä¸²è”çš„ï¼Œåœ¨é¦–æ¬¡æ¸²æŸ“æ—¶ "),s("code",[t._v("mountState")]),t._v(" æ„å»ºé“¾è¡¨å¹¶æ¸²æŸ“ï¼Œåœ¨æ›´æ–°æ¸²æŸ“æ—¶ "),s("code",[t._v("updateState")]),t._v(" ä¼šä¾æ¬¡éå†é“¾è¡¨ã€è¯»å–æ•°æ®å¹¶æ¸²æŸ“ã€‚æ³¨æ„è¿™ä¸ªè¿‡ç¨‹å°±åƒä»æ•°ç»„ä¸­ä¾æ¬¡å–å€¼ä¸€æ ·ï¼Œæ˜¯å®Œå…¨æŒ‰ç…§é¡ºåºï¼ˆæˆ–è€…è¯´ç´¢å¼•ï¼‰æ¥çš„ã€‚")]),t._v(" "),s("p",[t._v("æ‰€ä»¥ï¼Œåœ¨å¼€å‘ä¸­ï¼Œå¿…é¡»ç¡®ä¿æ‰€æœ‰ "),s("code",[t._v("Hook")]),t._v(" åœ¨æ¯æ¬¡æ¸²æŸ“ä¸­éƒ½æŒ‰ç…§åŒæ ·çš„é¡ºåºè¢«è°ƒç”¨ï¼Œä¿è¯é“¾è¡¨çš„å®Œæ•´æ€§ï¼")])])}),[],!1,null,null,null);s.default=e.exports}}]);